# weblogic puppet module 
# installs weblogic on linux and window based systems with 64 or 32 bits JDK
# just add the weblogic generic jar to the files folder of the wls module
#  
# install weblogic
# creates, configures and run nodemanager
# create a new weblogic domain

# use it like this in site.pp

include wls

$defaultJDK     = '7u7'
$defaultFullJDK = 'jdk1.7.0_07'

  
  case $operatingsystem {
     centos, redhat, OracleLinux, ubuntu, debian: { 
       $osWlHome     = "/opt/oracle/wls/wls12c/wlserver_12.1"
       $osTemplate   = "/common/templates/domains/wls.jar"
       $osDomainPath = "/opt/oracle/wls/wls12c/admin"
       $user         = "oracle"
       $group        = "dba"
     }
     windows: { 
       $osWlHome     = "c:\\oracle\\wls\\wls12c\\wlserver_12.1"
       $osTemplate   = "\\common\\templates\\domains\\wls.jar"
       $osDomainPath = "c:\\oracle\\wls\\wls12c\\admin"
       $user         = "Administrator"
       $group        = "Administrators"
     }
  }

  # set the defaults
  Wls::Installwls {
    version      => '1211',
    versionJdk   => $defaultJDK,
    user         => 'oracle',
    group        => 'dba',    
  }
  Wls::Wlsdomain {
    wlHome       => $osWlHome,
    fullJDKName  => $defaultFullJDK,	
    user         => 'oracle',
    group        => 'dba',    
  }
  Wls::Nodemanager {
    wlHome       => $osWlHome,
    fullJDKName  => $defaultFullJDK,	
    user         => 'oracle',
    group        => 'dba',    
  }
  
  
  # install
  wls::installwls{'wls12c':
    require      => Jdk7::Install7['jdk7'],
  }

  wls::wlsdomain{
  
    'testDomain':
    template     => $osTemplate,
    domain       => 'myTestDomain',
    domainPath   => $osDomainPath,
    require      => Wls::Installwls['wls12c'];

    'testDomain2':
    template        => $osTemplate,
    domain          => 'myTestDomain2',
    domainPath      => $osDomainPath,
    adminListenPort => '8001',
    require         => [ Wls::Installwls['wls12c'],Wls::Wlsdomain['testDomain']];
    
  }

  wls::nodemanager{'nodemanager':
    require      => Wls::Installwls['wls12c'],
  }
