java jdk7 JAVA SE 6/7 puppet module, install java on win/ux servers 

weblogic puppet module, installs weblogic,configure + starts nodemanager, domain creation 
ToDo: total weblogic configuration. Deployments 

#  java jdk7 JAVA SE 6/7 puppet module 
# installs jdk on linux based systems and window with 64 or 32 bits
# just add the jdk 6 or 7 files like jdk-6u35-linux-x64-rpm.bin, jdk-7u7-linux-x64.rpm, 
# jdk-7u7-windows-i586.exe or jdk-7u7-windows-x64.exe downloaded from Oracle website to 
# the files folder of jdk7 module
#
 
# weblogic puppet module 
# installs weblogic on linux window based systems with 64 or 32 bits JDK
# just add the weblogic generic jar to the files folder of the wls module
# use it like this in site.pp
#
# create a weblogic domain, Configure & Runs NodeManager 

# site.pp
#
 
import "templates"
import "nodes"

$defaultJDK     = '7u7'
$defaultFullJDK = 'jdk1.7.0_07'


# nodes.pp
#

node default {
}

node basenode {
}

node devel inherits basenode {
  $my_zone = "devel"
  include wls12Unix
}

node prod inherits basenode {
  $my_zone = "prod"
}

node 'devagent1.alfa.local' inherits devel {
}

node 'win7user.localdomain' inherits prod  {

  include wls1036
  include wls12Unix

} 

# templates.pp
#

include jdk7
include wls

class wls12Unix{


  jdk7::install7{'jdk7':
    version => $defaultJDK,
    x64     => "true",
  }
  
  case $operatingsystem {
     centos, redhat, OracleLinux, ubuntu, debian: { 
       $osWlHome     = "/opt/oracle/wls/wls12c/wlserver_12.1"
       $osTemplate   = "/common/templates/domains/wls.jar"
       $osDomainPath = "/opt/oracle/wls/wls12c/admin"
       $user         = "oracle"
       $group        = "dba"
     }
     windows: { 
       $osWlHome     = "c:\\oracle\\wls\\wls12c\\wlserver_12.1"
       $osTemplate   = "\\common\\templates\\domains\\wls.jar"
       $osDomainPath = "c:\\oracle\\wls\\wls12c\\admin"
       $user         = "Administrator"
       $group        = "Administrators"
     }
  }
  # set the defaults
  Wls::Installwls {
    version      => '1211',
    versionJdk   => $defaultJDK,
    user         => 'oracle',
    group        => 'dba',    
  }
  Wls::Wlsdomain {
    wlHome       => $osWlHome,
    fullJDKName  => $defaultFullJDK,	
    user         => 'oracle',
    group        => 'dba',    
  }
  Wls::Nodemanager {
    wlHome       => $osWlHome,
    fullJDKName  => $defaultFullJDK,	
    user         => 'oracle',
    group        => 'dba',    
  }
  
  # install
  wls::installwls{'wls12c':
    require      => Jdk7::Install7['jdk7'],
  }

  wls::wlsdomain{
  
    'testDomain':
    template     => $osTemplate,
    domain       => 'myTestDomain',
    domainPath   => $osDomainPath,
    require      => Wls::Installwls['wls12c'];

    'testDomain2':
    template        => $osTemplate,
    domain          => 'myTestDomain2',
    domainPath      => $osDomainPath,
    adminListenPort => '8001',
    require         => [ Wls::Installwls['wls12c'],Wls::Wlsdomain['testDomain']];
    
  }

  wls::nodemanager{'nodemanager':
    require      => Wls::Installwls['wls12c'],
  }

}

class wls1036{

  jdk7::install7{'jdk6':
    version => "6u35",
    x64     => "true",
  }

  case $operatingsystem {
     centos, redhat, OracleLinux, ubuntu, debian: { 
       $user         = "oracle"
       $group        = "dba"
     }
     windows: { 
       $user         = "Administrator"
       $group        = "Administrators"
     }
  }

  wls::installwls{'11gPS5':
    version    => '1036',
    versionJdk => '6u35',
    user       => $user,
    group      => $group,    
    require    => Jdk7::Install7['jdk6'],
  }
}
 
